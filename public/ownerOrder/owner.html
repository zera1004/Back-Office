<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 현황 (사장)</title>
</head>

<body>
    <h1>주문 현황 (사장)</h1>
    <select id="status">
        <option value="조리중">조리중</option>
        <option value="배달중">배달중</option>
        <option value="배달완료">배달완료</option>
    </select>
    <button onclick="updateStatus()">Update Status</button>

    <main>
        <div id="orderContainer"></div>
    </main>
    <script src="/socket.io/socket.io.js"></script>
    <!-- 로그인할때 쿠키로 사장 계정의 ownerId, paymnetId 등을 가져와 사용할 수 있을 듯 
     결제별로 연결이 되어야하고... 배달 완료 시 실시간 연결 끝
     일반 배달어플 > 결제 > 주문현황 페이지-->
    <script>

        const ownerId = 1 /* 테스트용 코드 */
        const socket = io();

        // 사장 역할 등록
        socket.emit('register', { role: 'owner', ownerId: ownerId });

        // 상태 업데이트 전송
        const updateStatus = () => {
            const status = document.getElementById('status').value;
            socket.emit('status_update', { status });
        };


    </script>
</body>

</html>